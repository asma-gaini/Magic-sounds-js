//  **************************************************** MUSIC INFORMATION  ****************************************************
const data_music = [
  {
    title: "roozaye abri",
    artist: "jahanbakhsh",
    audioSrc:
      "https://dl.rozmusic.com/Music/1396/10/13/Babak%20Jahanbakhsh%20-%20Roozhaye%20Abri%20(128).mp3",
    image: "../image/music cover/Babak Jahanbakhsh - RoozHaye Abri.jpg",
    id: 1,
    textMusic: [
      "roozaye abri",
      "روزای ابری",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "Parvaz",
    artist: "shahin najafi",
    audioSrc:
      "https://dl.ritmy.io/Single/Shahin_Najafi/Parvaz-128[ritmy.io].mp3",
    image: "../image/music cover/shahin najafi-parvaz.jpg",
    id: 2,
    textMusic: [
      "parvaz",
      "پرواز",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "nistameton",
    artist: "shaye",
    audioSrc:
      "https://dl.melonmusic.ir/Music/Shayea%20-%20Nistametoon%20(320).mp3",
    image: "../image/music cover/shaye-nistameton.png",
    id: 3,
    textMusic: [
      "nistametoon",
      "نیستمون",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "roozaye abri",
    artist: "jahanbakhsh",
    audioSrc:
      "https://dl.rozmusic.com/Music/1396/10/13/Babak%20Jahanbakhsh%20-%20Roozhaye%20Abri%20(128).mp3",
    image: "../image/music cover/Babak Jahanbakhsh - RoozHaye Abri.jpg",
    id: 4,
    textMusic: [
      "roozaye abri",
      "روزای ابری",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "Parvaz",
    artist: "shahin najafi",
    audioSrc:
      "https://dl.ritmy.io/Single/Shahin_Najafi/Parvaz-128[ritmy.io].mp3",
    image: "../image/music cover/shahin najafi-parvaz.jpg",
    id: 5,
    textMusic: [
      "parvaz",
      "پرواز",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "nistameton",
    artist: "shaye",
    audioSrc:
      "https://dl.melonmusic.ir/Music/Shayea%20-%20Nistametoon%20(320).mp3",
    image: "../image/music cover/shaye-nistameton.png",
    id: 6,
    textMusic: [
      "nistametoon",
      "نیستمون",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "roozaye abri",
    artist: "jahanbakhsh",
    audioSrc:
      "https://dl.rozmusic.com/Music/1396/10/13/Babak%20Jahanbakhsh%20-%20Roozhaye%20Abri%20(128).mp3",
    image: "../image/music cover/Babak Jahanbakhsh - RoozHaye Abri.jpg",
    id: 7,
    textMusic: [
      "roozaye abri",
      "روزای ابری",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "Parvaz",
    artist: "shahin najafi",
    audioSrc:
      "https://dl.ritmy.io/Single/Shahin_Najafi/Parvaz-128[ritmy.io].mp3",
    image: "../image/music cover/shahin najafi-parvaz.jpg",
    id: 8,
    textMusic: [
      "parvaz",
      "پرواز",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "nistameton",
    artist: "shaye",
    audioSrc:
      "https://dl.melonmusic.ir/Music/Shayea%20-%20Nistametoon%20(320).mp3",
    image: "../image/music cover/shaye-nistameton.png",
    id: 9,
    textMusic: [
      "nistametoon",
      "نیستمون",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "roozaye abri",
    artist: "jahanbakhsh",
    audioSrc:
      "https://dl.rozmusic.com/Music/1396/10/13/Babak%20Jahanbakhsh%20-%20Roozhaye%20Abri%20(128).mp3",
    image: "../image/music cover/Babak Jahanbakhsh - RoozHaye Abri.jpg",
    id: 10,
    textMusic: [
      "roozaye abri",
      "روزای ابری",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "Parvaz",
    artist: "shahin najafi",
    audioSrc:
      "https://dl.ritmy.io/Single/Shahin_Najafi/Parvaz-128[ritmy.io].mp3",
    image: "../image/music cover/shahin najafi-parvaz.jpg",
    id: 11,
    textMusic: [
      "parvaz",
      "پرواز",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
  {
    title: "nistameton",
    artist: "shaye",
    audioSrc:
      "https://dl.melonmusic.ir/Music/Shayea%20-%20Nistametoon%20(320).mp3",
    image: "../image/music cover/shaye-nistameton.png",
    id: 12,
    textMusic: [
      "nistametoon",
      "نیستمون",

      "I gave you your dreams",
      "من رویا هات رو بهت دادم",

      "Cause you ment the world",
      "چون تو دنیای من بودی",

      "So did I deserve to be left in hurt",
      "پس واقعا لیاقتم این بود که منو با این همه درد تنها بذاری",

      "So you think I don’t know",
      "فکر می کنی نمیدونم",

      "You’re out of control",
      "که تو غیر قابل کنترلی",
    ],
  },
];

//  **************************************************** CREATE ELEMENT  ****************************************************

window.onload = createPage();
function createPage() {
  createPlayList();
  createModal();
}

//  **************************************************** CREATE ELEMENT _ CREATE PLAY LIST ELEMENT  ****************************************************
function createPlayList() {
  const content = document.querySelector(".content");
  const palyListUl = document.createElement("ul");
  palyListUl.setAttribute("class", "playList");
  content.appendChild(palyListUl);

  createItemOfPlaylist(palyListUl);
}

function createItemOfPlaylist(ulTag) {
  for (let i = 0; i < data_music.length; i++) {
    //CREATE li
    const playlistItem = document.createElement("li");
    playlistItem.setAttribute("class", "playList-item");
    ulTag.appendChild(playlistItem);

    //CREATE image div
    const imageDiv = document.createElement("div");

    imageDiv.setAttribute("class", "playList-item-div-image");
    imageDiv.setAttribute("id", data_music[i].id);
    imageDiv.setAttribute("onClick", "togglePlay(this.id)");
    imageDiv.setAttribute("setmusicHasBeenCalled", "false");

    playlistItem.appendChild(imageDiv);

    //CREATE image tag
    const imageTag = document.createElement("img");

    imageTag.setAttribute("src", data_music[i].image);
    imageTag.setAttribute("alt", data_music[i].title);
    imageTag.setAttribute("class", "playList-item-image");

    imageDiv.appendChild(imageTag);

    //CREATE svg play
    const playSvg = document.createElement("img");
    playSvg.setAttribute("src", "../image/svg/play.svg");
    playSvg.setAttribute("class", "svg");
    playSvg.setAttribute("id", "playSvg");

    imageDiv.appendChild(playSvg);

    //CREATE svg pause
    const pauseSvg = document.createElement("img");
    pauseSvg.setAttribute("src", "../image/svg/pause.svg");
    pauseSvg.setAttribute("class", "svg");
    pauseSvg.setAttribute("id", "pauseSvg");

    imageDiv.appendChild(pauseSvg);

    //CREATE Link
    const link = document.createElement("a");

    link.setAttribute("href", "#");
    link.setAttribute("class", "playList-item-link");
    link.setAttribute("data-bs-toggle", "modal");
    link.setAttribute("data-bs-target", "#myModal");
    link.setAttribute("id", data_music[i].id);
    link.setAttribute("onClick", "openModal(this.id)");

    playlistItem.appendChild(link);

    //CRETE link information
    const divLinkInfo = document.createElement("div");

    divLinkInfo.setAttribute("class", "playList-item-info");

    link.appendChild(divLinkInfo);

    //CREATE link information title
    const titleLink = document.createElement("p");

    titleLink.setAttribute("class", "info-title");
    titleLink.innerHTML = data_music[i].title;

    divLinkInfo.appendChild(titleLink);

    //CREATE link information subtitle
    const subtitleLink = document.createElement("p");

    subtitleLink.setAttribute("class", "info-subtitle");
    subtitleLink.innerHTML = data_music[i].artist;

    divLinkInfo.appendChild(subtitleLink);
  }
}

//  **************************************************** CREATE ELEMENT _ CREATE MODAL  ****************************************************
function createModal() {
  const modalContent = document.querySelector(".modal-body");
  //CREATE div body
  const modalBodyDiv = document.createElement("div");
  modalBodyDiv.setAttribute("class", "modalContent-body");
  modalContent.appendChild(modalBodyDiv);

  //CREATE image div
  const modalImageDiv = document.createElement("div");
  modalImageDiv.setAttribute("class", "modalSong-Image");
  modalBodyDiv.appendChild(modalImageDiv);

  //CREATE image tag
  const modalImageTag = document.createElement("img");

  modalImageTag.setAttribute("src", "");
  modalImageTag.setAttribute("alt", "");
  modalImageTag.setAttribute("id", "single-song-image");

  modalImageDiv.appendChild(modalImageTag);

  //CREATE modal song information
  //div
  const modalInfoDiv = document.createElement("div");
  modalInfoDiv.setAttribute("class", "modalSong-info");
  modalBodyDiv.appendChild(modalInfoDiv);
  //h3
  const modalInfoTitle = document.createElement("h3");
  modalInfoTitle.setAttribute("class", "modalSong-title");
  modalInfoTitle.setAttribute("id", "modalSong-title");
  modalInfoDiv.appendChild(modalInfoTitle);
  //p
  const modalInfoArtist = document.createElement("h3");
  modalInfoArtist.setAttribute("class", "modalSong-artistName");
  modalInfoArtist.setAttribute("id", "modalSong-artistName");
  modalInfoDiv.appendChild(modalInfoArtist);

  //CREATE audio
  const modalAudioTag = document.createElement("audio");

  modalAudioTag.setAttribute("src", "");
  modalAudioTag.setAttribute("controls", "controls");
  modalAudioTag.setAttribute("alt", "");
  modalAudioTag.setAttribute("class", "modualSong-audio");
  modalAudioTag.setAttribute("id", "single-song");

  modalBodyDiv.appendChild(modalAudioTag);

  //CREATE text poem
  const modaltextDiv = document.createElement("div");
  modaltextDiv.setAttribute("class", "text");
  modalBodyDiv.appendChild(modaltextDiv);

  const modaltext = document.createElement("p");
  modaltext.setAttribute("class", "textContent");
  modaltext.setAttribute("id", "text");
  modaltextDiv.appendChild(modaltext);
}

//  **************************************************** GLOBAL VARIABLE ****************************************************
var songImage = document.getElementById("single-song-image");
var songTitle = document.getElementById("modalSong-title");
var songArtistName = document.getElementById("modalSong-artistName");

//  **************************************************** GLOBAL FUNCTION  ****************************************************
function setMusicHasBeenCalled(clickedId) {
  if (
    document
      .querySelector('div[id="' + clickedId + '"]')
      .getAttribute("setmusicHasBeenCalled") == "false"
  ) {
    setSongInformation(clickedId);
    document
      .querySelector('div[id="' + clickedId + '"]')
      .setAttribute("setmusicHasBeenCalled", "true");
  }
}

//  **************************************************** FUNCTION ON THE IMAGE TAG ON PLAY LIST  ****************************************************
function togglePlay(clickedId) {
  setMusicHasBeenCalled(clickedId);

  let contentActiveClass = document.getElementsByClassName("active");

  for (let i = 0; i < contentActiveClass.length; i++) {
    contentActiveClass[i].classList.remove("active");
  }

  playAndPuaseSong();
  document.querySelector('div[id="' + clickedId + '"]').classList.add("active");
  toggleSvg(clickedId);
}

function setSongInformation(clickedId) {
  let hasBeenSet = document.querySelectorAll('[setmusicHasBeenCalled="true"]');
  for (let i = 0; i < hasBeenSet.length; i++) {
    hasBeenSet[i].setAttribute("setmusicHasBeenCalled", "false");
  }

  for (let i = 0; i < data_music.length; i++) {
    if (data_music[i].id == clickedId) {
      document
        .getElementById("single-song")
        .setAttribute("src", data_music[i].audioSrc);
      songImage.setAttribute("src", data_music[i].image);
      songTitle.innerHTML = data_music[i].title;
      songArtistName.innerHTML = data_music[i].artist;
      setText(clickedId);
      return;
    }
  }
}

function setText(clickedId) {
  var textSong = document.getElementById("text");
  let textContent = "";

  for (let k = 0; k < data_music[clickedId - 1].textMusic.length; k++) {
    textContent += data_music[clickedId - 1].textMusic[k] + "<br>";
  }
  textSong.innerHTML = textContent;
}

function playAndPuaseSong() {
  document.getElementById("single-song").paused
    ? document.getElementById("single-song").play()
    : document.getElementById("single-song").pause();
}

function toggleSvg(clickedId) {
  removeSvg(clickedId);

  if (
    document
      .querySelector('div[id="' + clickedId + '"]')
      .classList.contains("play")
  ) {
    document
      .querySelector('div[id="' + clickedId + '"]')
      .classList.remove("play");
    document
      .querySelector('div[id="' + clickedId + '"]')
      .classList.add("pause");
  } else {
    document
      .querySelector('div[id="' + clickedId + '"]')
      .classList.remove("pause");
    document.querySelector('div[id="' + clickedId + '"]').classList.add("play");
  }
}

function removeSvg(clickedId) {
  let includesPlayClass = document.querySelectorAll(".play");
  let includesPauseClass = document.querySelectorAll(".pause");
  for (let i = 0; i < includesPlayClass.length; i++) {
    if (includesPlayClass[i].id == clickedId) {
      continue;
    }
    includesPlayClass[i].classList.remove("play");
  }
  for (let i = 0; i < includesPauseClass.length; i++) {
    if (includesPauseClass[i].id == clickedId) {
      continue;
    }
    includesPauseClass[i].classList.remove("pause");
  }
}
//  **************************************************** FUNCTION ON THE TEXT(LINK) TAG ON PLAY LIST  ****************************************************
function openModal(clickedId) {
  setMusicHasBeenCalled(clickedId);
  document.getElementById("single-song").play();
  toggleSvg(clickedId);
}
